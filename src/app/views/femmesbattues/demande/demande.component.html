<mat-card class="p-0">
<!--  <mat-card-title class="">
    <div class="card-title-text"><br><br>Demande<br><br></div>
  </mat-card-title>-->
  <mat-card-content>
    <form *ngIf="DemandeForm" [formGroup]="DemandeForm" (ngSubmit)="CreationDemande()">
      <div >
        <fieldset style="width-full">
          <div class="card-title-text">Saisine</div>
        </fieldset>
        <fieldset style="width-full">
         <div fxLayout="row wrap">
          <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="pe_datedemande"
                  formControlName="pe_datedemande"
                  placeholder="Date de la demande"
                  [matDatepicker]="appDatepicker">
                <mat-datepicker-toggle matSuffix [for]="appDatepicker"></mat-datepicker-toggle>
              </mat-form-field>
              <mat-datepicker #appDatepicker></mat-datepicker>
            </div>
          </div>
          <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
            <div class="pb-1">
              <mat-form-field appearance="fill" class="full-width">
                <mat-label>Structure Requérante</mat-label>
                <mat-select [(value)]="idstructurerequerante" formControlName="idstructurerequerante">
                  <mat-option *ngFor="let StructureRequerante of allStructureRequerantes" [value]="StructureRequerante.id">
                    {{StructureRequerante.sr_libelle }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
         </div>

         <div fxLayout="row wrap">
          <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
              <input
                  matInput
                  name="pe_nomdemandeur"
                  [formControl]="DemandeForm.controls['pe_nomdemandeur']"
                  placeholder="Nom et prénom de la personne en charge du dossier"
                  value="">
              </mat-form-field>
              <small
                *ngIf="DemandeForm.controls['pe_nomdemandeur'].hasError('required') && DemandeForm.controls['pe_nomdemandeur'].touched"
                class="form-error-msg"> Nom obligatoire </small>
              <small
                *ngIf="DemandeForm.controls['pe_nomdemandeur'].hasError('maxlength') && DemandeForm.controls['pe_nomdemandeur'].touched"
                class="form-error-msg"> Au plus {{DemandeForm.controls['pe_nomdemandeur'].errors.maxlength.requiredLength}} caractères pour le nom </small>
            </div>
          </div>
          <div fxFlex="100" fxFlex.gt-xs="50">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="pe_telephone"
                  [formControl]="DemandeForm.controls['pe_telephone']"
                  placeholder="Téléphone (Ligne directe si possible)"
                  value="">
              </mat-form-field>
              <small
                *ngIf="DemandeForm.controls['pe_telephone'].hasError('maxlength') && DemandeForm.controls['pe_telephone'].touched"
                class="form-error-msg"> Au plus {{DemandeForm.controls['pe_telephone'].errors.maxlength.requiredLength}} caractères pour le téléphone </small>
            </div>
          </div>
        </div>
          <div class="pb-1">
            <mat-form-field class="full-width">
              <input
                matInput
                name="pe_mail"
                [formControl]="DemandeForm.controls['pe_mail']"
                placeholder="Mail"
                value="">
            </mat-form-field>
            <small
              *ngIf="DemandeForm.controls['pe_mail'].hasError('maxlength') && DemandeForm.controls['pe_mail'].touched"
              class="form-error-msg"> Au plus {{DemandeForm.controls['pe_mail'].errors.maxlength.requiredLength}} caractères pour l'adresse mail</small>
          </div>
        </fieldset>

        <br>
        <fieldset style="width-full">
          <div class="card-title-text"><br>Personne à véhiculer<br></div>
        </fieldset>


        <fieldset style="width-full">
        <div fxLayout="row wrap">
         <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
          <div class="pb-1">
            <mat-form-field class="full-width">
              <input
                matInput
                name="vi_nom"
                [formControl]="DemandeForm.controls['vi_nom']"
                placeholder="Nom de Naissance"
                value="">
            </mat-form-field>
            <small
              *ngIf="DemandeForm.controls['vi_nom'].hasError('required') && DemandeForm.controls['vi_nom'].touched"
              class="form-error-msg"> Nom obligatoire </small>
            <small
              *ngIf="DemandeForm.controls['vi_nom'].hasError('maxlength') && DemandeForm.controls['vi_nom'].touched"
              class="form-error-msg"> Au plus {{DemandeForm.controls['vi_nom'].errors.maxlength.requiredLength}} caractères pour le nom </small>
          </div>
         </div>
         <div fxFlex="100" fxFlex.gt-xs="50">
           <div class="pb-1">
             <mat-form-field class="full-width">
               <input
                 matInput
                 name="vi_prenom"
                 [formControl]="DemandeForm.controls['vi_prenom']"
                 placeholder="Prénom"
                 value="">
             </mat-form-field>
             <small
               *ngIf="DemandeForm.controls['vi_prenom'].hasError('maxlength') && DemandeForm.controls['vi_prenom'].touched"
               class="form-error-msg"> Au plus {{DemandeForm.controls['vi_prenom'].errors.maxlength.requiredLength}} caractères pour le prenom</small>
           </div>
        </div>
        </div>

        <div class="pb-1">
          <mat-form-field class="full-width">
            <input
              matInput
              name="vi_nomusage"
              [formControl]="DemandeForm.controls['vi_nomusage']"
              placeholder="Nom d'usage"
              value="">
          </mat-form-field>
          <small
            *ngIf="DemandeForm.controls['vi_nomusage'].hasError('maxlength') && DemandeForm.controls['vi_nomusage'].touched"
            class="form-error-msg"> Au plus {{DemandeForm.controls['vi_nomusage'].errors.maxlength.requiredLength}} caractères pour le nom usage</small>
        </div>
           <div class="pb-1">
            <mat-form-field class="full-width">
              <input
                matInput
                name="vi_adresse"
                [formControl]="DemandeForm.controls['vi_adresse']"
                placeholder="Adresse"
                value="">
            </mat-form-field>
            <small
              *ngIf="DemandeForm.controls['vi_adresse'].hasError('maxlength') && DemandeForm.controls['vi_adresse'].touched"
              class="form-error-msg"> Au plus {{DemandeForm.controls['vi_adresse'].errors.maxlength.requiredLength}} caractères pour l'adresse</small>
           </div>

        <div fxLayout="row wrap">
          <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="vi_telephone"
                  [formControl]="DemandeForm.controls['vi_telephone']"
                  placeholder="Télephone"
                  value="">
              </mat-form-field>
              <small
                *ngIf="DemandeForm.controls['vi_telephone'].hasError('maxlength') && DemandeForm.controls['vi_telephone'].touched"
                class="form-error-msg"> Au plus {{DemandeForm.controls['vi_telephone'].errors.maxlength.requiredLength}} caractères pour le telephone</small>
            </div>

          </div>
          <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="vi_email"
                  [formControl]="DemandeForm.controls['vi_email']"
                  placeholder="Mail"
                  value="">
              </mat-form-field>
              <small
                *ngIf="DemandeForm.controls['vi_email'].hasError('maxlength') && DemandeForm.controls['vi_email'].touched"
                class="form-error-msg"> Au plus {{DemandeForm.controls['vi_email'].errors.maxlength.requiredLength}} caractères pour l'email</small>
            </div>
          </div>
        </div>
        <div fxLayout="row wrap">
          <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="vi_age"
                  [formControl]="DemandeForm.controls['vi_age']"
                  placeholder="Age"
                  value="">
              </mat-form-field>
            </div>
          </div>
          <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="vi_enfantcharge"
                  [formControl]="DemandeForm.controls['vi_enfantcharge']"
                  placeholder="Enfant à charge"
                  value="">
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="pb-1">
          <mat-form-field class="full-width">
            <input
              matInput
              name="vi_infocomplementaire"
              [formControl]="DemandeForm.controls['vi_infocomplementaire']"
              placeholder="Informations complémentaires"
              value="">
          </mat-form-field>
          <small
            *ngIf="DemandeForm.controls['vi_infocomplementaire'].hasError('maxlength') && DemandeForm.controls['vi_infocomplementaire'].touched"
            class="form-error-msg"> Au plus {{DemandeForm.controls['vi_infocomplementaire'].errors.maxlength.requiredLength}} caractères pour les informations complementaires</small>
        </div>
        </fieldset>

        <br>
        <fieldset style="width-full">
          <div class="card-title-text"><br>Demande<br></div>
        </fieldset>

        <fieldset style="width-full">

          <div fxLayout="row wrap">
            <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
              <div class="pb-1">
                <mat-form-field class="full-width">
                  <input
                    matInput
                    name="de_datealler"
                    formControlName="de_datealler"
                    placeholder="Date Aller"
                    [matDatepicker]="appDateAllerpicker">
                  <mat-datepicker-toggle matSuffix [for]="appDateAllerpicker"></mat-datepicker-toggle>
                </mat-form-field>
                <mat-datepicker #appDateAllerpicker></mat-datepicker>
              </div>
            </div>
            <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
              <div class="pb-1">
                <label for="de_heurealler"><br>Heure Aller&nbsp;&nbsp;&nbsp;</label>
                <input type="time"
                       name="de_heurealler"
                       formControlName="de_heurealler">
              </div>
            </div>
          </div>


        <div class="pb-1">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Motif</mat-label>
            <mat-select [(value)]="idmotif" formControlName="idmotif">
              <mat-option *ngFor="let motif of allMotifs" [value]="motif.id">
                {{motif.mo_libelle }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div fxLayout="row wrap">
          <div fxFlex="100" fxFlex.gt-xs="33" class="pr-1">
            <div class="pb-1">
              <Label>Enfant présent lors du trajet <br> </Label>
              <mat-radio-group
                name="de_enfantpresent"
                formControlName="de_enfantpresent">
                <mat-radio-button value="O">Oui</mat-radio-button>
                <mat-radio-button value="N">Non</mat-radio-button>
              </mat-radio-group>
            </div>
          </div>
          <div fxFlex="100" fxFlex.gt-xs="33" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="de_nbenfant"
                  [formControl]="DemandeForm.controls['de_nbenfant']"
                  placeholder="Si oui nombre?"
                  value="">
              </mat-form-field>
            </div>
          </div>
          <div fxFlex="100" fxFlex.gt-xs="33" class="pr-1">
            <div class="pb-1">
              <mat-form-field class="full-width">
                <input
                  matInput
                  name="de_ageenfant"
                  [formControl]="DemandeForm.controls['de_ageenfant']"
                  placeholder="Age des enfants"
                  value="">
              </mat-form-field>
            </div>
          </div>
        </div>
          <div class="pb-1">
            <mat-form-field class="full-width">
              <input
                matInput
                name="de_particularite"
                [formControl]="DemandeForm.controls['de_particularite']"
                placeholder="Particularité pour le transport (siège bébé, fauteuil roulant, poussette, bagages)"
                value="">
            </mat-form-field>
          </div>
          <div class="pb-1">
            <mat-form-field class="full-width">
              <input
                matInput
                name="de_adressedepart"
                [formControl]="DemandeForm.controls['de_adressedepart']"
                placeholder="Adresse de la prise en charge de la victime"
                value="">
            </mat-form-field>
          </div>
          <div class="pb-1">
            <mat-form-field class="full-width">
              <input
                matInput
                name="de_adressearrivee"
                [formControl]="DemandeForm.controls['de_adressearrivee']"
                placeholder="Adresse de dépôt de la victime (Attention cette adresse ne pourra étre modifiée par la vicitme lors de la prise en charge)"
                value="">
            </mat-form-field>
          </div>

          <div fxLayout="row wrap">
            <div fxFlex="100" fxFlex.gt-xs="34" class="pr-1">
              <div class="pb-1">
                <Label><br>Aller/Retour </Label>
                <mat-radio-group
                  name="de_allerretour"
                  formControlName="de_allerretour">
                  <mat-radio-button value="O">Oui</mat-radio-button>
                  <mat-radio-button value="N">Non</mat-radio-button>
                </mat-radio-group>
              </div>

            </div>
            <div fxFlex="100" fxFlex.gt-xs="33" class="pr-1">
              <div class="pb-1">
                <mat-form-field class="full-width">
                  <input
                    matInput
                    name="de_dateretour"
                    formControlName="de_dateretour"
                    placeholder="Date Retour"
                    [matDatepicker]="appDateRetourpicker">
                  <mat-datepicker-toggle matSuffix [for]="appDateRetourpicker"></mat-datepicker-toggle>
                </mat-form-field>
                <mat-datepicker #appDateRetourpicker></mat-datepicker>
              </div>
            </div>
            <div fxFlex="100" fxFlex.gt-xs="33" class="pr-1">
              <div class="pb-1">
                <label for="de_heureretour"><br>Heure Retour&nbsp;&nbsp;&nbsp;</label>
                <input type="time"
                       name="de_heureretour"
                       formControlName="de_heureretour">
              </div>
            </div>
          </div>


        </fieldset>

      <br>
        <fieldset style="width-full">
          <div class="card-title-text"><br>Encadré réservé au taxi en charge de la course<br></div>
        </fieldset>
        <fieldset style="width-full">
          <div fxLayout="row wrap">
            <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
              <mat-card-content>
                Date de prise en charge
              </mat-card-content>
            </div>
            <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
              <mat-card-content>
                Heure de début de prise en charge <br>
                Heure de fin de prise en charge
              </mat-card-content>
            </div>
          </div>

          <div fxLayout="row wrap">
            <div fxFlex="100" fxFlex.gt-xs="50" class="pr-1">
              <mat-card-content>
                Nom <br>
                Prénom
              </mat-card-content>
            </div>
          </div>

        </fieldset>

        </div>
      <button
        mat-raised-button
        color="primary"
        [disabled]="DemandeForm.invalid">Valider
      </button>
    </form>
  </mat-card-content>
</mat-card>

