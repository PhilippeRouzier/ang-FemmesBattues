<div class="mat-box-shadow margin-333">
  <button *ngIf="bAdmin" title="Export excel" (click)="ExportExcel()">
    <img src="assets/images/excel.png" alt="">
  </button>
  <ngx-datatable class="material bg-white"
                 [columnMode]="'force'"
                 [headerHeight]="50"
                 [footerHeight]="50"
                 [rowHeight]="60"
                 [limit]="8"
                 [rows]="rows"
                 [scrollbarH]="true"
                 >
                 <ngx-datatable-column name="" prop="idPriseEnCharge" width="250">
                   <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                     <div *ngIf="bPrescripteur">
                        <button title="Modifier la Demande" (click)="modifier(value)">
                           <img src="assets/images/modifier.png" alt="">
                       </button>
                        <button title="Supprimer la Demande" (click)="supprimer(value)">
                           <img src="assets/images/supprimer.png" alt="">
                        </button>
                       <button title="Consulter la prise en charge"(click)="PdfVisuDemande(value)">
                         <img src="assets/images/transp.png" alt="">
                       </button>
                     </div>
                     <div *ngIf="!bPrescripteur">
                       <button title="Consulter la prise en charge"(click)="PdfVisuDemande(value)">
                         <img src="assets/images/transp.png" alt="">
                       </button>
                       <button *ngIf="bChauffeur" title="Facturer la Course" (click)="detail(value)">
                         <img src="assets/images/facture.png" alt="">
                       </button>
                       <button title="Visualiser la Facture"  (click)="PdfVisuFacture(value)">
                         <img src="assets/images/pdf.png" alt="">
                       </button>
                     </div>
                   </ng-template>
                 </ngx-datatable-column>
<!--                 <ngx-datatable-column name="fact" prop="idPriseEnCharge">
                   <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                     <div *ngIf="value | Facture:row:'a2':'a3'">
                       <button md-button (click)="detail(idPriseEnCharge,'facture')">
                         Facture
                       </button>
                     </div>

                   </ng-template>
                 </ngx-datatable-column>-->

                 <ngx-datatable-column name="Date" prop="dateDemandeVisu"></ngx-datatable-column>
                 <ngx-datatable-column name="Victime" prop="nomVictime"></ngx-datatable-column>
                 <ngx-datatable-column name="Structure Requerante" prop="structureRequerante"></ngx-datatable-column>
                 <ngx-datatable-column name="Depart" prop="adresseDepart"></ngx-datatable-column>
                 <ngx-datatable-column name="Arrivee" prop="adresseArrivee"></ngx-datatable-column>
                 <ngx-datatable-column name="Demande" prop="noDemande"></ngx-datatable-column>
<!--                 <div *ngIf="!bPrescripteur">
                    <ngx-datatable-column name="Montant" prop="montant"></ngx-datatable-column>
                    <ngx-datatable-column name="Chauffeur" prop="nomChauffeur"></ngx-datatable-column>
                 </div>
-->
  </ngx-datatable>
  <dx-data-grid
    id="gridContainer"
    [dataSource]="rows"
    [remoteOperations]="false"
    [focusedRowEnabled]="true"
    [showBorders]="true"
    [columnAutoWidth]="true"
    keyExpr="idPriseEnCharge"
    wordWrapEnabled="true"
  >
    <dxo-paging [pageSize]="10"> </dxo-paging>
    <dxo-pager
      [visible]="true"
      [allowedPageSizes]="[10, 20, 50]"
      [showPageSizeSelector]="true"
      [showInfo]="true"
      [showNavigationButtons]="true"
    >
    </dxo-pager>

    <!--    [allowColumnReordering]="true"-->
    <!--    [rowAlternationEnabled]="true"-->

    <dxi-column type="buttons" [width]="110">
      <dxi-button
        hint="Consulter la prise en charge"
        icon="assets/images/transp.png"
        cssClass="dx-link"
        [onClick]="PdfVisuDemandeSelected"
      ></dxi-button>
        <dxi-button
          hint="Visualiser la Facture"
          icon="assets/images/pdf.png"
          class="canClick"
          [onClick]="PdfVisuFactureSelected"
        ></dxi-button>
<!--      <dxi-button-->
<!--        hint="Consulter la prise en charge"-->
<!--        icon="car"-->
<!--        [onClick]="PdfVisuDemandeSelected"-->
<!--      ></dxi-button>-->
<!--      <dxi-button-->
<!--        hint="Visualiser la Facture"-->
<!--        text="PEC"-->
<!--        icon="pdffile"-->
<!--        [onClick]="PdfVisuFactureSelected"-->
<!--      ></dxi-button>-->
    </dxi-column>

    <dxi-column dataField="dateDemandeVisu" caption="Date"></dxi-column>
    <dxi-column dataField="nomVictime" caption="Victime"></dxi-column>
    <dxi-column dataField="structureRequerante" caption="Structure Requérante"></dxi-column>
<!--    <dxi-column-->
<!--      dataField="adresseDepart"-->
<!--      caption="Départ"-->
<!--      [width]="250"-->
<!--      [allowFiltering]="false"-->
<!--      [allowSorting]="false"-->
<!--      cellTemplate="cellTemplate"-->
<!--    ></dxi-column>-->
    <dxi-column dataField="adresseDepart" caption="Départ" [width]="300"></dxi-column>
    <dxi-column dataField="adresseArrivee" caption="Arrivée" [width]="300"></dxi-column>
    <dxi-column dataField="noDemande" caption="Demande"></dxi-column>

    <div *dxTemplate="let data of 'cellTemplate'">
      <div>{{ data.value }}</div>
    </div>

  </dx-data-grid>
</div>
